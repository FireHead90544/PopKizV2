(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))p(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&p(o)}).observe(document,{childList:!0,subtree:!0});function y(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function p(a){if(a.ep)return;a.ep=!0;const c=y(a);fetch(a.href,c)}})();const I=()=>{fetch("./customize.json").then(t=>t.json()).then(t=>{const m=(o,r)=>r.split(".").reduce((i,l)=>i==null?void 0:i[l],o);document.querySelectorAll('[data-template^="metadata."]').forEach(o=>{const r=o.getAttribute("data-template"),i=m(t,r);i&&(o.tagName==="TITLE"?o.textContent=i:o.tagName==="META"&&o.setAttribute("content",i))});const p={greeting:"initialGreeting.greeting",name:"initialGreeting.name",greetingText:"initialGreeting.subtext",text1:"initialGreeting.announcement",textInChatBox:"initialGreeting.chatBoxMessage",sendButtonLabel:"initialGreeting.sendButtonLabel",text2:"initialGreeting.reactionsSequence.0",text3:"initialGreeting.reactionsSequence.1",text4:"initialGreeting.reactionsSequence.2.text",text4Adjective:"initialGreeting.reactionsSequence.2.emphasize",text5Entry:"initialGreeting.reactionsSequence.3",text5Content:"initialGreeting.reactionsSequence.4.text",smiley:"initialGreeting.reactionsSequence.4.smiley",bigTextPart1:"initialGreeting.reactionsSequence.5.drumRoll1",bigTextPart2:"initialGreeting.reactionsSequence.5.drumRoll2",imagePath:"birthdayWish.recipientImage",wishHeading:"birthdayWish.mainWish",wishText:"birthdayWish.message",outroText:"outro.message",replayText:"outro.replayText",outroSmiley:"outro.smiley"};let a=0;const c=Object.keys(p).length;if(Object.keys(p).forEach((o,r)=>{const i=p[o],l=m(t,i);if(l!==void 0&&l!==""){const u=document.querySelector(`[data-node-name="${o}"]`);u&&(o==="imagePath"?u.setAttribute("src",l):u.innerText=l)}a++,a===c&&O()}),t.scrapbook){const o=document.querySelector('[data-template="scrapbook.buttonLabel"]');o&&t.scrapbook.buttonLabel&&(o.textContent=t.scrapbook.buttonLabel),t.scrapbook.images&&t.scrapbook.images.forEach((l,u)=>{const f=document.querySelector(`[data-template="scrapbook.images.${u}"]`);f&&f.setAttribute("src",l)});const r=document.querySelector('[data-template="scrapbook.message"]');r&&t.scrapbook.message&&(r.innerHTML=t.scrapbook.message.map(l=>`<p>${l}</p>`).join(""));const i=document.querySelector('[data-template="scrapbook.readyButtonLabel"]');i&&t.scrapbook.readyButtonLabel&&(i.textContent=t.scrapbook.readyButtonLabel)}if(t.cakeRoom){const o=document.querySelector('[data-template="cakeRoom.title"]');o&&t.cakeRoom.title&&(o.textContent=t.cakeRoom.title);const r=document.querySelector('[data-template="cakeRoom.popup"]');if(r&&t.cakeRoom.popup){const i=t.cakeRoom.popup.messages,l=t.cakeRoom.popup.emojis;r.innerHTML=i.map((u,f)=>`<p>${u}<span class="cake-popup-emoji">${l[f]||""}</span></p>`).join("")}}if(t.giftBox){const o=document.querySelector('[data-template="giftBox.popup"]');if(o&&t.giftBox.popup){const r=t.giftBox.popup.messages,i=t.giftBox.popup.emojis;o.innerHTML=r.map((l,u)=>`<p>${l} <span class="gift-popup-emoji">${i[u]||""}</span></p>`).join("")}}window.birthdayConfig=t})},O=()=>{const t=document.getElementsByClassName("hbd-chatbox")[0],m=document.getElementsByClassName("wish-hbd")[0];t.innerHTML=`<span>${t.innerHTML.split("").join("</span><span>")}</span`,m.innerHTML=m.innerHTML.split("").map(f=>f===" "?'<span class="space-char"> </span>':`<span>${f}</span>`).join("");const y={opacity:0,y:-20,rotationX:5,skewX:"15deg"},p={opacity:0,y:20,rotationY:5,skewX:"-15deg"},a=new TimelineMax;a.to(".container",.1,{visibility:"visible"}).from(".one",.7,{opacity:0,y:10}).from(".two",.4,{opacity:0,y:10}).to(".one",.7,{opacity:0,y:10},"+=2.5").to(".two",.7,{opacity:0,y:10},"-=1").from(".three",.7,{opacity:0,y:10}).to(".three",.7,{opacity:0,y:10},"+=2").from(".four",.7,{scale:.2,opacity:0}).from(".fake-btn",.3,{scale:.2,opacity:0}).staggerTo(".hbd-chatbox span",.5,{visibility:"visible"},.05).to(".fake-btn",.1,{backgroundColor:"rgb(127, 206, 248)"}).to(".four",.5,{scale:.2,opacity:0,y:-150},"+=0.7").from(".idea-1",.7,y).to(".idea-1",.7,p,"+=1.5").from(".idea-2",.7,y).to(".idea-2",.7,p,"+=1.5").from(".idea-3",.7,y).to(".idea-3 strong",.5,{scale:1.2,x:10,backgroundColor:"rgb(21, 161, 237)",color:"#fff"}).to(".idea-3",.7,p,"+=1.5").from(".idea-4",.7,y).to(".idea-4",.7,p,"+=1.5").from(".idea-5",.7,{rotationX:15,rotationZ:-10,skewY:"-5deg",y:50,z:10,opacity:0},"+=0.5").to(".idea-5 .smiley",.7,{rotation:360,x:8},"+=0.4").to(".idea-5",.7,{scale:.2,opacity:0},"+=2").staggerFrom(".idea-6 span",.8,{scale:3,opacity:0,rotation:15,ease:Expo.easeOut},.2).staggerTo(".idea-6 span",.8,{scale:3,opacity:0,rotation:-15,ease:Expo.easeOut},.2,"+=1").staggerFromTo(".baloons img",2.5,{opacity:.9,y:1400},{opacity:1,y:-1e3},.2).from(".kizzy-dp",.5,{scale:3.5,opacity:0,x:25,y:-25,rotationZ:-45},"-=2").from(".hat",.5,{x:-100,y:350,rotation:-180,opacity:0}).staggerFrom(".wish-hbd span",.7,{opacity:0,y:-50,rotation:150,skewX:"30deg",ease:Elastic.easeOut.config(1,.5)},.1).staggerFromTo(".wish-hbd span",.7,{scale:1.4,rotationY:150},{scale:1,rotationY:0,color:"#ff69b4",ease:Expo.easeOut},.1,"party").from(".wish h5",.5,{opacity:0,y:10,skewX:"-15deg"},"party").staggerTo(".eight svg",1.5,{visibility:"visible",opacity:0,scale:80,repeat:3,repeatDelay:1.4},.3).to(".six",.5,{opacity:0,y:30,zIndex:"-1"}).staggerFrom(".nine p",1,y,1.2).to(".last-smile",.5,{rotation:90},"+=1").to("#scrapbook-btn-container",.5,{autoAlpha:1},"+=1");const c=()=>{const f=document.getElementById("birthday-music"),b=document.getElementById("pop-sound");f.load(),b.load()};document.getElementById("replay").addEventListener("click",()=>{a.restart()});const r=document.getElementById("scrapbook-btn"),i=document.getElementById("scrapbook-container"),l=document.getElementById("ready-btn");r.addEventListener("click",()=>{TweenMax.to("#scrapbook-btn-container",.5,{autoAlpha:0}),TweenMax.to(i,.5,{autoAlpha:1}),c()});const u=document.getElementById("cake-room");l.addEventListener("click",()=>{TweenMax.to(i,.5,{autoAlpha:0,onComplete:()=>{TweenMax.to(u,.5,{autoAlpha:1}),window.dispatchEvent(new Event("showCake"))}})})};I();const A=()=>{const t=document.querySelector(".cake"),m=document.querySelector(".cake-container");let y=[],p,a,c,o=!1;const r=(n,d)=>{const s=document.createElement("div");s.className="candle",s.style.left=n+"px",s.style.top=d+"px";const e=document.createElement("div");e.className="flame",s.appendChild(e),t.appendChild(s),y.push(s)},i=()=>{r(100,20),r(120,40),r(140,20),r(80,40),r(60,20)},l=()=>{const n=a.frequencyBinCount,d=new Uint8Array(n);a.getByteFrequencyData(d);let s=0;for(let h=0;h<n;h++)s+=d[h];return s/n>30},u=document.getElementById("pop-sound"),f=document.getElementById("birthday-music"),b=()=>{const n=document.querySelector(".confetti-container"),d=["#fde2e4","#ffc2d1","#ff9a8b","#b19cd9","#fffaf0"];for(let s=0;s<50;s++){const e=document.createElement("div");e.classList.add("confetti");const h=Math.random()*100;e.style.left=h+"vw";const q=(Math.random()-.5)*200;e.style.setProperty("--tx",q+"px");const B=Math.random()*10+5;e.style.width=B+"px",e.style.height=B+"px",Math.random()>.5&&(e.style.borderRadius="50%"),e.style.backgroundColor=d[Math.floor(Math.random()*d.length)];const C=Math.random()*2+3;e.style.animationDelay=Math.random()*.5+"s",e.style.animation=`confetti-fall ${C}s linear forwards`,n.appendChild(e),setTimeout(()=>{e.remove()},(C+.5)*1e3)}},T=()=>{b(),setInterval(()=>{b()},1e3)},L=()=>{var n,d;if(!o&&l()){let s=!0;if(y.forEach(e=>{e.classList.contains("out")||e.classList.add("out")}),y.forEach(e=>{e.classList.contains("out")||(s=!1)}),s&&!o){o=!0;try{const e=(n=window.birthdayConfig)==null?void 0:n.discordWebhook;e!=null&&e.url&&fetch(e.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:((d=e.notifications)==null?void 0:d.candlesBlownOut)||"All cake candles blown out!"})})}catch(e){console.error("Error sending webhook for candles blown out:",e)}u.play().catch(e=>console.log("Pop sound error:",e)),f.play().catch(e=>console.log("Music error:",e)),T(),setTimeout(()=>{m.style.cursor="pointer",m.addEventListener("click",S)},1e3)}}},S=()=>{var d,s;document.getElementById("cake-popup-overlay").classList.add("active");try{const e=(d=window.birthdayConfig)==null?void 0:d.discordWebhook;e!=null&&e.url&&fetch(e.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:((s=e.notifications)==null?void 0:s.cakeClicked)||"Cake clicked and popup shown!"})})}catch(e){console.error("Error sending webhook:",e)}},k=()=>{document.getElementById("cake-popup-overlay").classList.remove("active")},M=document.getElementById("cake-popup-close"),x=document.getElementById("cake-popup-overlay");M.addEventListener("click",k),x.addEventListener("click",n=>{n.target===x&&k()});const w=document.getElementById("gift-box"),g=document.getElementById("gift-popup-overlay"),E=document.getElementById("gift-popup-close");w&&w.addEventListener("click",n=>{var d,s;n.stopPropagation(),g.classList.add("active");try{const e=(d=window.birthdayConfig)==null?void 0:d.discordWebhook;e!=null&&e.url&&fetch(e.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:((s=e.notifications)==null?void 0:s.giftBoxClicked)||"Gift box clicked!"})})}catch(e){console.error("Error sending gift box webhook:",e)}});const v=()=>{g.classList.remove("active")};E&&E.addEventListener("click",v),g&&g.addEventListener("click",n=>{n.target===g&&v()}),navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){p=new(window.AudioContext||window.webkitAudioContext),a=p.createAnalyser(),c=p.createMediaStreamSource(n),c.connect(a),a.fftSize=256,i(),setInterval(L,200)}).catch(function(n){console.log("Unable to access microphone: "+n)}):console.log("getUserMedia not supported on your browser!")};window.addEventListener("showCake",A);
